<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Remedi’s Closet — Shop</title>
  <meta name="description" content="Remedi’s Closet — exclusive, bunker-coded drops. Limited access." />

  <!-- You are serving /dist/shop.html; this keeps relative paths like assets/... and data/... correct -->
  <base href="/dist/">

  <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Varela+Round&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800,900&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous" defer></script>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Site CSS -->
  <link href="css/styles.css" rel="stylesheet" />

  <style>
    /* ===== THEME VARS (soft grayscale bunker) ===== */
    :root{
      --show-nav: 1;
      --bg-0:#1a1d21;
      --bg-1:#22262b;
      --panel:#2a2e33;
      --card:#24282c;
      --line:#3a3f45;
      --text:#f1f3f5;
      --muted:#b0b5bb;
      --accent:#d62c2c;

      /* glass */
      --glass-bg: rgba(26,29,33,.55);
      --glass-stroke: rgba(255,255,255,.08);
      --glass-blur: 12px;
    }

    html,body{height:100%;}
    body{
      background: radial-gradient(1200px 600px at 50% -10%, #2a2e33 0%, #1a1d21 55%) fixed;
      color:var(--text);
      font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Varela Round", sans-serif;
      letter-spacing:.01em;
    }

    /* ===== NAV ===== */
    .navbar{
      display: calc(var(--show-nav) * 1) !important;
      background: rgba(26,29,33,.9);
      backdrop-filter: blur(8px);
      border-bottom:1px solid var(--line);
    }
    .navbar-brand{letter-spacing:.08em;text-transform:uppercase;font-weight:800;color:var(--text)!important}
    .nav-link{color:var(--muted)!important}
    .nav-link:hover{color:var(--accent)!important}

    /* ===== HERO ===== */
    .shop-hero{
      position:relative;
      min-height:42vh;
      display:grid;place-items:center;text-align:center;
      border-bottom:1px solid var(--line);
      background:
        linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.75)),
        url('assets/img/bg-masthead.jpg') center/cover no-repeat;
    }
    .shop-hero h1{
      text-transform:uppercase; letter-spacing:.18em; margin:0;
    }
    .shop-hero p{color:var(--muted); margin:.75rem 0 0}

    /* ===== CONTENT WRAPPER ===== */
    main{ padding-top: clamp(1rem, 3vh, 2rem); }

    /* ===== FILTERS ===== */
    .filters-bar{
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:.9rem;
      padding:1rem;
    }
    .filters-bar .form-control,
    .filters-bar .form-select{
      background:#1e2226; color:var(--text); border:1px solid #32363b;
    }
    .filters-bar .form-control::placeholder{color:#9399a1}

    /* ===== PRODUCT GRID ===== */
    .product-card{
      position: relative;
      background:var(--card);
      border:1px solid var(--line);
      border-radius:1rem;
      height:100%;
      display:flex;flex-direction:column;
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
      overflow:hidden;
    }
    .product-card:hover{
      transform:translateY(-2px);
      border-color:var(--accent);
      box-shadow:0 14px 28px rgba(0,0,0,.35);
    }

    .product-thumb{
      position: relative;
      aspect-ratio:1/1;
      background:#1f2226;
      border-bottom:1px solid var(--line);
      overflow:hidden;
    }
    .product-thumb img{
      width:100%;height:100%;object-fit:cover;display:block;
      transform:scale(1.03);
      transition:transform .3s ease, filter .3s ease;
    }
    .product-card:hover .product-thumb img{ transform:scale(1.06); filter:saturate(1.05) contrast(1.05); }

    /* subtle top vignette for readability */
    .product-thumb::after{
      content:""; position:absolute; inset:0;
      background: linear-gradient(to top, rgba(0,0,0,.35), rgba(0,0,0,0) 55%);
      pointer-events:none;
    }

    /* Show a gentle placeholder if an image fails */
    .product-thumb.is-missing{display:grid;place-items:center;color:var(--muted);border:1px dashed var(--line);}

    /* ===== GLASS OVERLAY ===== */
    .product-glass{
      position:absolute; left:0; right:0; bottom:0;
      display:grid; gap:.45rem; padding:.9rem .95rem; color:var(--text);
      background:
        linear-gradient(to top, rgba(0,0,0,.45), rgba(0,0,0,.08)),
        var(--glass-bg);
      border-top:1px solid var(--glass-stroke);
      backdrop-filter: blur(var(--glass-blur)); -webkit-backdrop-filter: blur(var(--glass-blur));
      border-bottom-left-radius:1rem; border-bottom-right-radius:1rem;
      transform: translateY(100%);
      transition: transform .25s ease;
    }
    .product-card.glass-hover:hover .product-glass,
    .product-card.glass-hover:focus-within .product-glass { transform: translateY(0%); }

    .product-title{ font-weight:800; letter-spacing:.04em; margin:0; text-shadow:0 1px 0 rgba(0,0,0,.35); }
    .product-meta{ color:var(--muted); font-size:.92rem; }
    .price{ font-weight:900; }

    .glass-row{ display:flex; align-items:center; justify-content:space-between; gap:.75rem; }

    .btn-ghost{
      border:1px solid var(--accent);
      background: rgba(214,44,44,.06);
      color:var(--accent);
      border-radius:.6rem; padding:.5rem .7rem; font-weight:800; line-height:1;
    }
    .btn-ghost:hover{ background: var(--accent); color:#fff; }

    /* ===== BADGES ===== */
    .badge-soft{
      background: rgba(214,44,44,.15);
      color: var(--accent);
      border:1px solid rgba(214,44,44,.35);
      padding:.25rem .45rem;
      border-radius:.45rem;
      font-size:.75rem;
    }

    /* ===== FOOTER ===== */
    footer{ color:var(--muted); border-top:1px solid var(--line) }
  </style>
</head>
<body id="shop-page">

  <!-- ===== NAV ===== -->
  <nav class="navbar navbar-expand-lg fixed-top" aria-label="Primary">
    <div class="container">
      <a class="navbar-brand" href="index.html">Remedi’s Closet</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu"
              aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="index.html">Enter</a></li>
          <li class="nav-item"><a class="nav-link active" aria-current="page" href="shop.html">Shop</a></li>
          <li class="nav-item"><a class="nav-link" href="checkout.html">Checkout</a></li>
          <li class="nav-item ms-lg-3">
            <a class="btn btn-sm btn-outline-light" href="checkout.html" aria-label="View cart">
              <i class="fas fa-lock me-1"></i> Cart <span id="cartCount" class="badge badge-soft ms-1" aria-live="polite">0</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ===== HERO ===== -->
  <header class="shop-hero">
    <div class="container">
      <h1>Access: Shop</h1>
      <p>Authorized items only. Limited drops. Clearance required.</p>
    </div>
  </header>

  <!-- ===== CONTENT ===== -->
  <main class="py-5" id="content">
    <div class="container">

      <!-- Filters -->
      <div class="filters-bar mb-4">
        <form class="row g-2 align-items-center" id="filtersForm">
          <div class="col-12 col-md-5">
            <label class="visually-hidden" for="search">Search</label>
            <input class="form-control form-control-sm" id="search" type="search" placeholder="Search inventory…">
          </div>
          <div class="col-6 col-md-3">
            <label class="visually-hidden" for="category">Category</label>
            <select id="category" class="form-select form-select-sm">
              <option value="">All categories</option>
              <option>Tops</option>
              <option>Hoodies</option>
              <option>Accessories</option>
            </select>
          </div>
          <div class="col-6 col-md-2">
            <label class="visually-hidden" for="sort">Sort</label>
            <select id="sort" class="form-select form-select-sm">
              <option value="new">Newest</option>
              <option value="low">Price: Low → High</option>
              <option value="high">Price: High → Low</option>
            </select>
          </div>
          <div class="col-12 col-md-2 text-md-end">
            <button type="button" class="btn btn-sm btn-outline-danger" id="resetFilters">
              <i class="fas fa-rotate-left me-1"></i> Reset
            </button>
          </div>
        </form>
      </div>

      <!-- Products -->
      <section aria-labelledby="productsHeading">
        <h2 id="productsHeading" class="visually-hidden">Products</h2>
        <!-- Auto-fit grid: 2 on phones, 3 on md, 4 on lg -->
        <div class="row g-3 row-cols-2 row-cols-md-3 row-cols-lg-4" id="productsGrid"></div>
      </section>
    </div>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="py-4">
    <div class="container text-center small">
      ACCESS LOG • <span class="text-muted">Remedi’s Closet</span> • <span id="year"></span>
    </div>
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Products Renderer (JSON -> Cards) -->
  <script>
  fetch('js/products.json')
    .then(r => r.json())
    .then(data => renderProducts(data.products))
    .catch(() => { /* silent */ });

  function renderProducts(items) {
    const grid = document.getElementById('productsGrid');
    grid.innerHTML = items.map(cardHTML).join('');
  }

  function cardHTML(p) {
    const price = formatUSD(p.price);
    const badge = p.badge ? `<span class="badge-soft">${esc(p.badge)}</span>` : '';
    const meta  = `${esc(p.category)} • ${esc(p.stock || 'On hand')}`;
    return `
      <div class="col">
        <article class="product-card glass-hover" data-category="${esc(p.category)}" data-price="${esc(p.price)}">
          <div class="product-thumb">
            <img
              src="${esc(p.image)}"
              alt="${esc(p.alt || p.name)}"
              loading="lazy"
              onerror="this.closest('.product-thumb').classList.add('is-missing')"
            >
          </div>
          <div class="product-glass">
            <h3 class="product-title h6">${esc(p.name)}</h3>
            <div class="product-meta">${meta}</div>
            <div class="glass-row">
              <div class="price">${price}</div>
              ${badge}
            </div>
            ${p.desc ? `<p class="product-desc">${esc(p.desc)}</p>` : ``}
            <button class="btn-ghost" data-sku="${esc(p.sku)}" aria-label="Add ${esc(p.name)} to cart">
              <i class="fas fa-key me-1"></i> Add to Cart
            </button>
          </div>
        </article>
      </div>
    `;
  }

  function formatUSD(n){
    return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0}).format(n);
  }
  function esc(s){
    return String(s).replace(/[&<>"']/g, m => (
      {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]
    ));
  }

  document.getElementById('year').textContent = new Date().getFullYear();
  const cartCountEl = document.getElementById('cartCount');
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('.btn-ghost');
    if (!btn) return;
    if (cartCountEl) cartCountEl.textContent = String((+cartCountEl.textContent || 0) + 1);
    btn.innerHTML = '<i class="fas fa-unlock me-1"></i> Added';
    setTimeout(() => btn.innerHTML = '<i class="fas fa-key me-1"></i> Add to Cart', 900);
  });

  document.getElementById('resetFilters')?.addEventListener('click', () => {
    document.getElementById('filtersForm').reset();
  });
</script>


</body>
</html>
